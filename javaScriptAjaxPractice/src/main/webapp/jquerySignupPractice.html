<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JQiery로 회원가입 유효성 검사 연습</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
	$('#id').focus();
	/*
	// id
	$('#id').blur(function(){
		if($('#id').val().length < 4) {
			$('#idMsg').text('아이디는 4자 이상');
			$('#id').focus();
		} else {
			$('#idMsg').text('');
			$('#pw').focus();
		}
	});
	// pw
	$('#pw').blur(function(){
		if($('#pw').val().length < 4) {
			$('#pwMsg').text('암호는 4자 이상');
			$('#pw').focus();
		} else {
			$('#pwMsg').text('');
			$('#pwck').focus();
		}
	});
	// pwck
	$('#pwck').blur(function(){
		if($('#pwck').val() != $('#pw').val()) {
			$('#pwMsg').text('암호를 확인하세요');
			$('#pw').focus();
		} else {
			$('#pwMsg').text('');
			$('#name').focus();
		}
	});
	
	// 이름
	$('#name').blur(function(){
		if($('#name').val().length < 1) {
			$('#nameMsg').text('이름을 입력하세요');
			$('#name').focus();
		} else {
			$('#nameMsg').text('');
			$('#birth').focus();
		}
	});
	// 생일
	$('#birth').blur(function(){
		if($('#birth').val().length < 1) {
			$('#birthMsg').text('생일을 입력하세요');
			$('#birth').focus();
		} else {
			// 나이를 구하기 위해서 오늘 년도 & 월
			let today = new Date();
			let todayYear = today.getFullYear();
			console.log('todayYear :', todayYear);
			
			let age = todayYear - Number($('#birth').val().substr(0, 4));
			console.log('age :', age);
			// 월,일도 비교해서 -1을 할 수도...
			$('#age').val(age);
			$('#birthMsg').text('');
		}
	});
	*/
	
	$('#signinBtn').click(function(){
		if($('#id').val().length < 4) {
			$('#idMsg').text('아이디는 4자 이상');
			$('#id').focus();
			return;
		} else {
			$('#idMsg').text('');
		}
		
		if($('#pw').val().length < 4) {
			$('#pwMsg').text('암호는 4자 이상');
			$('#pw').focus();
			return;
		} else {
			$('#pwMsg').text('');
		}
		
		if($('#pw').val() != $('#pwck').val()) {
			$('#pwMsg').text('암호를 확인하세요');
			$('#name').focus();
			return;
		} else {
			$('#pwMsg').text('');
		}
		
		// name 유효성 검사
		// birth 유효성 검사 -> 나이 
		
		if($('.gender:checked').length == 0) {
			$('#genderMsg').text('성별을 선택하세요');
			return;
		} else {
			$('#genderMsg').text('');
		}
		
		if($('.hobby:checked').length < 2) {
			$('#hobbyMsg').text('취미는 2개이상 선택하세요');
			return;
		} else {
			$('#hobbyMsg').text('');
		}
		
		// 메일 검사
		
		// return;을 한번도 만나지 않았다면 -> action으로 서브밋
		$('#signinForm').submit();
	});	
});
</script>
</head>
<body>
	<h2>회원가입</h2>
	<form id="signinForm" action="./signinAction.jsp">
		<table border="1">
			<!-- 아이디 -->
			<tr>
				<td>*아이디</td>
				<td>
					<input type="text" id="id" value=""> 
					<span id="idMsg" class="msg"></span>
				</td>
			</tr>
			<!-- 비밀번호 -->
			<tr>
				<td>
					<div>*비밀번호</div>
					<div>비밀번호확인</div>
				</td>
				<td>
					<div>
						<input type="password" id="pw" value="">
						<span id="pwMsg" class="msg"></span>
					</div>
					<div>
						<input type="password" id="pwck" value="">
					</div>
				</td>
			</tr>
			<!-- 이름 -->
			<tr>
				<td>*이름</td>
				<td>
					<input type="text" id="name"  value="">
					<span id="nameMsg" class="msg"></span>
				</td>
			</tr>
			<!-- 생일 -->
			<tr>
				<td>*생일</td>
				<td>
					<input type="date" id="birth">
					<span id="birthMsg" class="msg"></span>
				</td>
			</tr>
			<!-- 나이 -->
			<tr> 
				<td>*나이</td>
				<td><input type="text" id="age" readonly="readonly"></td>
			</tr>
			<!-- 성별 -->
			<tr>
				<td>*성별</td>
				<td>
					<input type="radio" name="gender" class="gender">남 
					<input type="radio" name="gender" class="gender">여
					<span id="genderMsg" class="msg"></span>
				</td>	
				</tr>
			<!-- 취미 -->
			<tr>
				<td>*취미</td>
				<td>
					<input type="checkbox" name="hobby" class="hobby">여행 
					<input type="checkbox" name="hobby" class="hobby">게임 
					<input type="checkbox" name="hobby" class="hobby">등산
					<span id="hobbyMsg" class="msg"></span>
				</td>
			</tr>
			<!-- 메일주소 -->
			<tr>
				<td>*메일</td>
				<td>
					<span><input type="text" id="email"></span> 
					<span>@</span> 
					<select id="emailUrl">
						<option value="">선택</option>
						<option value="naver.com">naver</option>
						<option value="daum.net">daum</option>
						<option value="gmail.com">gmail</option>
					</select>
					<span id="emailMsg" class="msg"></span>
				</td>
			</tr>
			<!-- 메모 -->
			<tr>
				<td>메모(선택입력)</td>
				<td><textarea cols="50" rows="5"></textarea></td>
			</tr>
		</table>
		<button type="button" id="signinBtn">회원가입</button>
		<button type="reset">초기화</button>
	</form>
</body>
</html>